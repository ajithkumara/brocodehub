<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text to Speech</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f4f4f4;
        }
        h2 { color: #333; }
        textarea {
            width: 100%;
            height: 150px;
            padding: 10px;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        button {
            margin-top: 15px;
            padding: 12px 25px;
            font-size: 16px;
            border: none;
            background-color: #0080ff;
            color: white;
            border-radius: 6px;
            cursor: pointer;
        }
        button:hover { background-color: #005fcc; }
        #status { margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <h2>Text to Speech Converter</h2>
    <textarea id="ttsInput" placeholder="Enter text here...">Hello, this is a test.</textarea>
    <br>
    <button onclick="speakText()">Speak</button>
    <div id="status"></div>

    <script>
        function speakText() {
            const input = document.getElementById("ttsInput");
            const status = document.getElementById("status");
            const text = input.value.trim();

            if (!text) {
                status.textContent = "‚ö†Ô∏è Please enter some text.";
                status.style.color = "orange";
                return;
            }

            status.textContent = "üîä Generating speech...";
            status.style.color = "#0080ff";

            // Construct URL (note: leading '/' ‚Üí relative to root, i.e., http://localhost:5000/tts)
            const url = `/tts?text=${encodeURIComponent(text)}`;

            const audio = new Audio(url);

            audio.onloadeddata = () => {
                status.textContent = "‚ñ∂Ô∏è Playing...";
                status.style.color = "green";
            };

            audio.onerror = (e) => {
                console.error("Audio load failed:", e);
                status.textContent = "‚ùå Failed to load audio. Check console.";
                status.style.color = "red";
            };

            audio.play()
                .then(() => {
                    console.log("Playback started.");
                })
                .catch(err => {
                    console.error("Play failed:", err);
                    status.textContent = `‚ùå Playback blocked: ${err.message}`;
                    status.style.color = "red";
                    // Common: Chrome blocks autoplay without user gesture ‚Äî but button click is OK.
                    // Still, if mic/camera permissions or site settings block media, this happens.
                });
        }
    </script>

<p><a href="/">‚¨Ö Back to Home</a></p>
</body>
</html>